"use strict";(self.webpackChunkspotify_demo=self.webpackChunkspotify_demo||[]).push([[445],{2445:(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var a=r(6739),n=r(6858),i=r(9494),s=r(5647),o=r(5147),l=r(2764),c=r(680),d=r(4872),h=r(4848);const p=(0,a.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-evenly",marginTop:"30px"}})),g=()=>(0,h.jsx)("div",{children:(0,h.jsxs)(p,{children:[(0,h.jsx)(c.A,{}),(0,h.jsx)(i.A,{variant:"h2",fontWeight:700,children:"Your Library"}),(0,h.jsx)(d.A,{sx:{color:"green"}})]})});var x=r(4529),u=r(4422),m=r(6475),y=r(1083),f=r(5800);const j=y.A.create({baseURL:f.$,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});j.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("access_token")),e)));const v=j,w=e=>{let{limit:t,offset:r}=e;return(0,m.q)({queryKey:["current-user-playlists"],queryFn:e=>{let{pageParam:r=0}=e;return(async e=>{let{limit:t,offset:r}=e;try{return(await v.get("/me/playlists",{params:{limit:t,offset:r}})).data}catch(e){throw new Error("fila to fetch current user playlists")}})({limit:t,offset:r})},initialPageParam:0,getNextPageParam:e=>{if(e.next){const t=new URL(e.next).searchParams.get("offset");return t?parseInt(t):void 0}}})};var A=r(7286);const b=async()=>{try{return(await v.get("/me")).data}catch(e){throw new Error("fail to fetch user porfile")}},k=()=>{const e=localStorage.getItem("access_token");return(0,A.I)({queryKey:["current-user-profile"],queryFn:b,enabled:!!e})};var S=r(6540),_=r(5692);const P=(0,a.Ay)("div")((e=>{let{theme:t}=e;return{overflowY:"auto",maxHeight:"calc(100vh - 240px)",height:"100%",padding:"12px","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none",[t.breakpoints.down("sm")]:{maxHeight:"calc(100vh - 65px - 119px)"}}})),C=()=>{const{data:e,fetchNextPage:t,hasNextPage:r,isFetchingNextPage:a}=w({limit:10,offset:0}),{data:n}=k(),{ref:s,inView:o}=(0,_.Wx)();return(0,S.useEffect)((()=>{o&&r&&!a&&t()}),[o,r,a]),n&&e?(0,h.jsxs)(P,{children:[(0,h.jsx)(x.A,{cols:2,gap:16,variant:"standard",children:e.pages.map(((e,t)=>e.items.map(((e,r)=>{const a=Array.isArray(e.images)&&e.images.length>0?e.images[0].url:"";return(0,h.jsxs)(u.A,{children:[(0,h.jsx)("img",{src:a||"/broken-image.jpg",alt:e.name,loading:"lazy",style:{borderRadius:8}}),(0,h.jsx)(i.A,{variant:"subtitle1",fontWeight:700,color:"limegreen",mt:1,children:e.name}),(0,h.jsxs)(i.A,{variant:"body2",color:"#aaa",children:["Playlist â€¢ ",e.owner.display_name]})]},"".concat(t,"-").concat(e.id))}))))}),(0,h.jsx)("div",{ref:s})]}):null};var I=r(8344),R=r(431),U=r(9783);const W=()=>(0,h.jsx)(R.A,{variant:"contained",color:"secondary",size:"large",onClick:()=>{(async()=>{const e=crypto.getRandomValues(new Uint8Array(64)).reduce(((e,t)=>e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[t%62]),""),t=(r=await(async e=>{const t=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",t)})(e),btoa(String.fromCharCode(...new Uint8Array(r))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"));var r;const a=U.U6,n=f._,i=U.iW,s=new URL("https://accounts.spotify.com/authorize");if(window.localStorage.setItem("code_verifier",e),a&&n){const e={response_type:"code",client_id:a,scope:i,code_challenge_method:"S256",code_challenge:t,redirect_uri:n};s.search=new URLSearchParams(Object.entries(e)).toString(),window.location.href=s.toString()}})()},children:"Login"}),q=()=>{var e;const[t,r]=(0,S.useState)(!1),{data:a}=k(),i=null==a||null===(e=a.images)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url;return(0,h.jsx)(n.A,{display:"flex",justifyContent:"flex-end",alignItems:"center",height:"40px",children:a?(0,h.jsx)(I.A,{src:!t&&i?i:"/broken-image.jpg",onError:()=>r(!0),alt:"user-profile",sx:{width:32,height:32}}):(0,h.jsx)(W,{})})},L=(0,a.Ay)("div")({display:"flex",height:"100vh",padding:"8px"}),z=(0,a.Ay)("div")((e=>{let{theme:t}=e;return{width:"331px",height:"100%",display:"flex",flexDirection:"column",[t.breakpoints.down("sm")]:{display:"none"}}})),E=(0,a.Ay)(n.A)((e=>{let{theme:t}=e;return{borderRadius:"8px",backgroundColor:t.palette.background.paper,color:t.palette.text.primary,width:"100%",padding:"20px",marginBottom:"8px",marginRight:"8px"}})),H=(0,a.Ay)("ul")({listStyle:"none",padding:0,margin:0}),N=(0,a.Ay)(s.k2)((e=>{let{theme:t}=e;return{textDecoration:"none",display:"flex",alignItems:"center",gap:"20px",color:t.palette.text.secondary,"&.active":{color:t.palette.text.primary},"& svg":{color:t.palette.text.secondary},"&.active svg":{color:t.palette.text.primary}}})),B=()=>(0,h.jsx)("div",{children:(0,h.jsxs)(L,{children:[(0,h.jsxs)(z,{children:[(0,h.jsx)(E,{children:(0,h.jsxs)(H,{children:[(0,h.jsxs)(N,{to:"/",children:[(0,h.jsx)(o.A,{}),(0,h.jsx)(i.A,{variant:"h2",fontWeight:700,children:"Home"})]}),(0,h.jsxs)(N,{to:"/search",children:[(0,h.jsx)(l.A,{}),(0,h.jsx)(i.A,{variant:"h2",fontWeight:700,children:"Search"})]})]})}),(0,h.jsx)(g,{}),(0,h.jsx)(C,{})]}),(0,h.jsxs)(E,{children:[(0,h.jsx)(q,{}),(0,h.jsx)(s.sv,{})]})]})})}}]);
//# sourceMappingURL=445.js.map?ver=163e66b247224a4043d0