"use strict";(self.webpackChunkspotify_demo=self.webpackChunkspotify_demo||[]).push([[723],{2229:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(1083),n=r(5800);const i=a.A.create({baseURL:n.$,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});i.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("access_token")),e)));const s=i},5723:(e,t,r)=>{r.r(t),r.d(t,{default:()=>H});var a=r(6739),n=r(6858),i=r(9494),s=r(5647),o=r(5147),l=r(2764),c=r(680),d=r(4872),h=r(4848);const p=(0,a.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-evenly",marginTop:"30px"}})),g=()=>(0,h.jsx)("div",{children:(0,h.jsxs)(p,{children:[(0,h.jsx)(c.A,{}),(0,h.jsx)(i.A,{variant:"h2",fontWeight:700,children:"Your Library"}),(0,h.jsx)(d.A,{sx:{color:"green"}})]})});var x=r(4529),u=r(4422),y=r(6475),m=r(8511);var f=r(7286),v=r(2229);const j=async()=>{try{return(await v.A.get("/me")).data}catch(e){throw new Error("fail to fetch user porfile")}},w=()=>{const e=localStorage.getItem("access_token");return(0,f.I)({queryKey:["current-user-profile"],queryFn:j,enabled:!!e})};var A=r(6540),b=r(5692);const k=(0,a.Ay)("div")((e=>{let{theme:t}=e;return{overflowY:"auto",maxHeight:"calc(100vh - 240px)",height:"100%",padding:"12px","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none",[t.breakpoints.down("sm")]:{maxHeight:"calc(100vh - 65px - 119px)"}}})),_=()=>{const{data:e,fetchNextPage:t,hasNextPage:r,isFetchingNextPage:a}=(e=>{let{limit:t,offset:r}=e;return(0,y.q)({queryKey:["current-user-playlists"],queryFn:e=>{let{pageParam:r=0}=e;return(0,m.U)({limit:t,offset:r})},initialPageParam:0,getNextPageParam:e=>{if(e.next){const t=new URL(e.next).searchParams.get("offset");return t?parseInt(t):void 0}}})})({limit:10,offset:0}),{data:n}=w(),{ref:o,inView:l}=(0,b.Wx)();(0,A.useEffect)((()=>{l&&r&&!a&&t()}),[l,r,a]);const c=(0,s.Zp)();return n&&e?(0,h.jsxs)(k,{children:[(0,h.jsx)(x.A,{cols:2,gap:16,variant:"standard",children:e.pages.map(((e,t)=>e.items.map(((e,r)=>{const a=Array.isArray(e.images)&&e.images.length>0?e.images[0].url:"",n=e.id;return n?(0,h.jsxs)(u.A,{onClick:()=>(e=>{c("/playlist/".concat(e))})(n),children:[(0,h.jsx)("img",{src:a||"/broken-image.jpg",alt:e.name,loading:"lazy",style:{borderRadius:8}}),(0,h.jsx)(i.A,{variant:"subtitle1",fontWeight:700,color:"limegreen",mt:1,children:e.name}),(0,h.jsxs)(i.A,{variant:"body2",color:"#aaa",children:["Playlist â€¢ ",e.owner.display_name]})]},"".concat(t,"-").concat(e.id)):null}))))}),(0,h.jsx)("div",{ref:o})]}):null};var S=r(8344),P=r(431),C=r(9783),U=r(5800);const I=()=>(0,h.jsx)(P.A,{variant:"contained",color:"secondary",size:"large",onClick:()=>{(async()=>{const e=crypto.getRandomValues(new Uint8Array(64)).reduce(((e,t)=>e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[t%62]),""),t=(r=await(async e=>{const t=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",t)})(e),btoa(String.fromCharCode(...new Uint8Array(r))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"));var r;const a=C.U6,n=U._,i=C.iW,s=new URL("https://accounts.spotify.com/authorize");if(window.localStorage.setItem("code_verifier",e),a&&n){const e={response_type:"code",client_id:a,scope:i,code_challenge_method:"S256",code_challenge:t,redirect_uri:n};s.search=new URLSearchParams(Object.entries(e)).toString(),window.location.href=s.toString()}})()},children:"Login"}),R=()=>{var e;const[t,r]=(0,A.useState)(!1),{data:a}=w(),i=null==a||null===(e=a.images)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url;return(0,h.jsx)(n.A,{display:"flex",justifyContent:"flex-end",alignItems:"center",height:"40px",children:a?(0,h.jsx)(S.A,{src:!t&&i?i:"/broken-image.jpg",onError:()=>r(!0),alt:"user-profile",sx:{width:32,height:32}}):(0,h.jsx)(I,{})})},W=(0,a.Ay)("div")({display:"flex",height:"100vh",padding:"8px"}),q=(0,a.Ay)("div")((e=>{let{theme:t}=e;return{width:"331px",height:"100%",display:"flex",flexDirection:"column",[t.breakpoints.down("sm")]:{display:"none"}}})),E=(0,a.Ay)(n.A)((e=>{let{theme:t}=e;return{borderRadius:"8px",backgroundColor:t.palette.background.paper,color:t.palette.text.primary,width:"100%",padding:"20px",marginBottom:"8px",marginRight:"8px"}})),L=(0,a.Ay)("ul")({listStyle:"none",padding:0,margin:0}),z=(0,a.Ay)(s.k2)((e=>{let{theme:t}=e;return{textDecoration:"none",display:"flex",alignItems:"center",gap:"20px",color:t.palette.text.secondary,"&.active":{color:t.palette.text.primary},"& svg":{color:t.palette.text.secondary},"&.active svg":{color:t.palette.text.primary}}})),H=()=>(0,h.jsx)("div",{children:(0,h.jsxs)(W,{children:[(0,h.jsxs)(q,{children:[(0,h.jsx)(E,{children:(0,h.jsxs)(L,{children:[(0,h.jsxs)(z,{to:"/",children:[(0,h.jsx)(o.A,{}),(0,h.jsx)(i.A,{variant:"h2",fontWeight:700,children:"Home"})]}),(0,h.jsxs)(z,{to:"/search",children:[(0,h.jsx)(l.A,{}),(0,h.jsx)(i.A,{variant:"h2",fontWeight:700,children:"Search"})]})]})}),(0,h.jsx)(g,{}),(0,h.jsx)(_,{})]}),(0,h.jsxs)(E,{children:[(0,h.jsx)(R,{}),(0,h.jsx)(s.sv,{})]})]})})},8511:(e,t,r)=>{r.d(t,{U:()=>n,b:()=>i});var a=r(2229);const n=async e=>{let{limit:t,offset:r}=e;try{return(await a.A.get("/me/playlists",{params:{limit:t,offset:r}})).data}catch(e){throw new Error("fila to fetch current user playlists")}},i=async e=>{try{return(await a.A.get("/playlists/".concat(e.playlist_id),{params:e})).data}catch(e){throw new Error("fail to fetch playlist detail")}}}}]);
//# sourceMappingURL=723.js.map?ver=9ff2b6bc914460d788cc