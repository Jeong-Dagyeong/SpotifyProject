"use strict";(self.webpackChunkspotify_demo=self.webpackChunkspotify_demo||[]).push([[239],{2229:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(1083),i=r(5800);const o=a.A.create({baseURL:i.$7,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});o.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("access_token")),e)));const n=o},4239:(e,t,r)=>{r.r(t),r.d(t,{default:()=>re});var a=r(6540),i=r(5647),o=r(7286),n=r(8511);var s=r(6739),l=r(9494),c=r(4164),d=r(1362);const p=a.createContext();var h=r(9241),u=r(3202),g=r(6148),y=r(1908);function f(e){return(0,y.Ay)("MuiTable",e)}(0,g.A)("MuiTable",["root","stickyHeader"]);var v=r(4848);const m=(0,s.Ay)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.stickyHeader&&t.stickyHeader]}})((0,h.A)((({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:e})=>e.stickyHeader,style:{borderCollapse:"separate"}}]})))),b="table",x=a.forwardRef((function(e,t){const r=(0,u.b)({props:e,name:"MuiTable"}),{className:i,component:o=b,padding:n="normal",size:s="medium",stickyHeader:l=!1,...h}=r,g={...r,component:o,padding:n,size:s,stickyHeader:l},y=(e=>{const{classes:t,stickyHeader:r}=e,a={root:["root",r&&"stickyHeader"]};return(0,d.A)(a,f,t)})(g),x=a.useMemo((()=>({padding:n,size:s,stickyHeader:l})),[n,s,l]);return(0,v.jsx)(p.Provider,{value:x,children:(0,v.jsx)(m,{as:o,role:o===b?null:"table",ref:t,className:(0,c.A)(y.root,i),ownerState:g,...h})})})),w=a.createContext();function A(e){return(0,y.Ay)("MuiTableHead",e)}(0,g.A)("MuiTableHead",["root"]);const k=(0,s.Ay)("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),P={variant:"head"},j="thead",R=a.forwardRef((function(e,t){const r=(0,u.b)({props:e,name:"MuiTableHead"}),{className:a,component:i=j,...o}=r,n={...r,component:i},s=(e=>{const{classes:t}=e;return(0,d.A)({root:["root"]},A,t)})(n);return(0,v.jsx)(w.Provider,{value:P,children:(0,v.jsx)(k,{as:i,className:(0,c.A)(s.root,a),ref:t,role:i===j?null:"rowgroup",ownerState:n,...o})})}));var M=r(2777);function C(e){return(0,y.Ay)("MuiTableRow",e)}const S=(0,g.A)("MuiTableRow",["root","selected","hover","head","footer"]),N=(0,s.Ay)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.head&&t.head,r.footer&&t.footer]}})((0,h.A)((({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${S.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${S.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,M.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,M.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})))),T="tr",H=a.forwardRef((function(e,t){const r=(0,u.b)({props:e,name:"MuiTableRow"}),{className:i,component:o=T,hover:n=!1,selected:s=!1,...l}=r,p=a.useContext(w),h={...r,component:o,hover:n,selected:s,head:p&&"head"===p.variant,footer:p&&"footer"===p.variant},g=(e=>{const{classes:t,selected:r,hover:a,head:i,footer:o}=e,n={root:["root",r&&"selected",a&&"hover",i&&"head",o&&"footer"]};return(0,d.A)(n,C,t)})(h);return(0,v.jsx)(N,{as:o,ref:t,className:(0,c.A)(g.root,i),role:o===T?null:"row",ownerState:h,...l})})),$=H;var z=r(9407);function _(e){return(0,y.Ay)("MuiTableCell",e)}const O=(0,g.A)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),I=(0,s.Ay)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`size${(0,z.A)(r.size)}`],"normal"!==r.padding&&t[`padding${(0,z.A)(r.padding)}`],"inherit"!==r.align&&t[`align${(0,z.A)(r.align)}`],r.stickyHeader&&t.stickyHeader]}})((0,h.A)((({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid\n    ${"light"===e.palette.mode?(0,M.a)((0,M.X4)(e.palette.divider,1),.88):(0,M.e$)((0,M.X4)(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${O.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:e})=>e.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]})))),E=a.forwardRef((function(e,t){const r=(0,u.b)({props:e,name:"MuiTableCell"}),{align:i="inherit",className:o,component:n,padding:s,scope:l,size:h,sortDirection:g,variant:y,...f}=r,m=a.useContext(p),b=a.useContext(w),x=b&&"head"===b.variant;let A;A=n||(x?"th":"td");let k=l;"td"===A?k=void 0:!k&&x&&(k="col");const P=y||b&&b.variant,j={...r,align:i,component:A,padding:s||(m&&m.padding?m.padding:"normal"),size:h||(m&&m.size?m.size:"medium"),sortDirection:g,stickyHeader:"head"===P&&m&&m.stickyHeader,variant:P},R=(e=>{const{classes:t,variant:r,align:a,padding:i,size:o,stickyHeader:n}=e,s={root:["root",r,n&&"stickyHeader","inherit"!==a&&`align${(0,z.A)(a)}`,"normal"!==i&&`padding${(0,z.A)(i)}`,`size${(0,z.A)(o)}`]};return(0,d.A)(s,_,t)})(j);let M=null;return g&&(M="asc"===g?"ascending":"descending"),(0,v.jsx)(I,{as:A,ref:t,className:(0,c.A)(R.root,o),"aria-sort":M,scope:k,ownerState:j,...f})})),V=E;function B(e){return(0,y.Ay)("MuiTableBody",e)}(0,g.A)("MuiTableBody",["root"]);const D=(0,s.Ay)("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),W={variant:"body"},F="tbody",L=a.forwardRef((function(e,t){const r=(0,u.b)({props:e,name:"MuiTableBody"}),{className:a,component:i=F,...o}=r,n={...r,component:i},s=(e=>{const{classes:t}=e;return(0,d.A)({root:["root"]},B,t)})(n);return(0,v.jsx)(w.Provider,{value:W,children:(0,v.jsx)(D,{className:(0,c.A)(s.root,a),as:i,ref:t,role:i===F?null:"rowgroup",ownerState:n,...o})})}));var q=r(3923),U=r(6475);const X=e=>{let{playlist_id:t,limit:r}=e;return(0,U.q)({queryKey:["playlist-items",t],queryFn:e=>{let{pageParam:a=0}=e;return(0,n.Dg)({playlist_id:t,limit:r,offset:a})},initialPageParam:0,getNextPageParam:e=>{if(e.next){const t=new URL(e.next).searchParams.get("offset");return t?parseInt(t):void 0}}})};var K=r(5692);const Y=(0,s.Ay)(V)((()=>({borderBottom:"none"}))),J=(0,s.Ay)($)((e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.palette.action.hover}}})),Q=e=>{var t;let{item:r,index:i,playlist_id:o}=e;const{data:n,fetchNextPage:s,hasNextPage:l,isFetchingNextPage:c}=X({playlist_id:o,limit:10});console.log("ddd",n);const{ref:d,inView:p}=(0,K.Wx)();(0,a.useEffect)((()=>{p&&l&&!c&&s()}),[p,l,c]);let h=new Date,u=h.getFullYear(),g=String(h.getMonth()+1).padStart(2,"0"),y=String(h.getDate()).padStart(2,"0"),f=String(h.getMinutes()),m=String(h.getSeconds()),b="".concat(u,"-").concat(g,"-").concat(y),x="".concat(f,":").concat(m);return(0,v.jsxs)(J,{children:[(0,v.jsx)(Y,{children:i}),(0,v.jsx)(Y,{children:r.track.name||"no name"}),(0,v.jsx)(Y,{children:(w=r.track,"description"in w?"N/A":null===(t=r.track.album)||void 0===t?void 0:t.name)}),(0,v.jsx)(Y,{children:b||"Unknown"}),(0,v.jsxs)(Y,{children:[x||"Unknown",(0,v.jsx)("span",{ref:d,style:{display:"inline-block",width:1,height:1}})]})]});var w};var G=r(5800);const Z=(0,s.Ay)("div")((e=>{let{theme:t}=e;return{width:"100%",padding:"16px 16px 0px 16px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"}})),ee=(0,s.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",marginLeft:"20px"}})),te=(0,s.Ay)("div")((()=>({overflowY:"auto",maxHeight:"calc(100vh - 300px - 100px)",width:"100%","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"}))),re=()=>{var e,t,r,a;const{id:s}=(0,i.g)(),{data:c,isLoading:d}=(p={playlist_id:s||""},(0,o.I)({queryKey:["playlist-detali",p.playlist_id],queryFn:()=>(0,n.bt)(p),enabled:!!p.playlist_id}));var p;console.log(c);const{data:h,isLoading:u,error:g,fetchNextPage:y,hasNextPage:f,isFetchingNextPage:m}=X({playlist_id:s||"",limit:10});if(console.log("ddd",h),!s)return(0,v.jsx)(i.C5,{to:"/"});if(d||!c)return(0,v.jsx)(q.A,{});const b=(null===(e=c.images)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url)||"";return(0,v.jsxs)(Z,{children:[(0,v.jsx)("img",{src:b||"/images/noImage.png",alt:c.name,loading:"lazy",style:{borderRadius:8,width:100,height:100}}),(0,v.jsxs)(ee,{children:[(0,v.jsx)(l.A,{variant:"h3",fontWeight:700,color:"white",children:c.name}),(0,v.jsx)(l.A,{variant:"h2",fontWeight:700,color:"theme.primary",children:c.owner.display_name}),(0,v.jsxs)(l.A,{variant:"h2",fontWeight:700,color:"theme.primary",children:[null!==(t=null==c||null===(r=c.tracks)||void 0===r?void 0:r.total)&&void 0!==t?t:0," songs"]})]}),0===(null==c||null===(a=c.tracks)||void 0===a?void 0:a.total)?(0,v.jsx)(l.A,{children:"Search"}):(0,v.jsx)(te,{children:(0,v.jsxs)(x,{children:[(0,v.jsx)(R,{children:(0,v.jsxs)($,{children:[(0,v.jsx)(V,{children:"#"}),(0,v.jsx)(V,{children:"Title"}),(0,v.jsx)(V,{children:"Album"}),(0,v.jsx)(V,{children:"Date Added"}),(0,v.jsx)(V,{children:"Duration"})]})}),(0,v.jsx)(L,{children:null==h?void 0:h.pages.map(((e,t)=>e.items.map(((e,r)=>(0,v.jsx)(Q,{item:e,index:t*G.Wt+r+1,playlist_id:s},t*G.Wt+r+1)))))})]})})]})}},5692:(e,t,r)=>{r.d(t,{Wx:()=>c});var a=r(6540),i=(Object.defineProperty,new Map),o=new WeakMap,n=0,s=void 0;function l(e,t,r={},a=s){if(void 0===window.IntersectionObserver&&void 0!==a){const i=e.getBoundingClientRect();return t(a,{isIntersecting:a,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}const{id:l,observer:c,elements:d}=function(e){const t=function(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(r=e.root,r?(o.has(r)||(n+=1,o.set(r,n.toString())),o.get(r)):"0"):e[t]}`;var r})).toString()}(e);let r=i.get(t);if(!r){const a=new Map;let o;const n=new IntersectionObserver((t=>{t.forEach((t=>{var r;const i=t.isIntersecting&&o.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=i),null==(r=a.get(t.target))||r.forEach((e=>{e(i,t)}))}))}),e);o=n.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:n,elements:a},i.set(t,r)}return r}(r),p=d.get(e)||[];return d.has(e)||d.set(e,p),p.push(t),c.observe(e),function(){p.splice(p.indexOf(t),1),0===p.length&&(d.delete(e),c.unobserve(e)),0===d.size&&(c.disconnect(),i.delete(l))}}function c({threshold:e,delay:t,trackVisibility:r,rootMargin:i,root:o,triggerOnce:n,skip:s,initialInView:c,fallbackInView:d,onChange:p}={}){var h;const[u,g]=a.useState(null),y=a.useRef(p),[f,v]=a.useState({inView:!!c,entry:void 0});y.current=p,a.useEffect((()=>{if(s||!u)return;let a;return a=l(u,((e,t)=>{v({inView:e,entry:t}),y.current&&y.current(e,t),t.isIntersecting&&n&&a&&(a(),a=void 0)}),{root:o,rootMargin:i,threshold:e,trackVisibility:r,delay:t},d),()=>{a&&a()}}),[Array.isArray(e)?e.toString():e,u,o,i,n,s,r,d,t]);const m=null==(h=f.entry)?void 0:h.target,b=a.useRef(void 0);u||!m||n||s||b.current===m||(b.current=m,v({inView:!!c,entry:void 0}));const x=[g,f.inView,f.entry];return x.ref=x[0],x.inView=x[1],x.entry=x[2],x}a.Component},6475:(e,t,r)=>{r.d(t,{q:()=>s});var a=r(1651),i=r(8959),o=class extends a.${constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:(0,i.PL)()})}getOptimisticResult(e){return e.behavior=(0,i.PL)(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:r}=e,a=super.createResult(e,t),{isFetching:o,isRefetching:n,isError:s,isRefetchError:l}=a,c=r.fetchMeta?.fetchMore?.direction,d=s&&"forward"===c,p=o&&"forward"===c,h=s&&"backward"===c,u=o&&"backward"===c;return{...a,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,i.rB)(t,r.data),hasPreviousPage:(0,i.RQ)(t,r.data),isFetchNextPageError:d,isFetchingNextPage:p,isFetchPreviousPageError:h,isFetchingPreviousPage:u,isRefetchError:l&&!d&&!h,isRefetching:n&&!p&&!u}}},n=r(8074);function s(e,t){return(0,n.t)(e,o,t)}},8511:(e,t,r)=>{r.d(t,{Dg:()=>n,Nt:()=>s,U4:()=>i,bt:()=>o});var a=r(2229);const i=async e=>{let{limit:t,offset:r}=e;try{return(await a.A.get("/me/playlists",{params:{limit:t,offset:r}})).data}catch(e){throw new Error("fila to fetch current user playlists")}},o=async e=>{try{return(await a.A.get("/playlists/".concat(e.playlist_id),{params:e})).data}catch(e){throw new Error("fail to fetch playlist detail")}},n=async e=>{try{return(await a.A.get("/playlists/".concat(e.playlist_id,"/tracks"),{params:e})).data}catch(e){throw new Error("fail to fetch playlist items")}},s=async(e,t)=>{try{const{name:r,playlist_public:i,collaborative:o,description:n}=t;return(await a.A.post("/users/".concat(e,"/playlists"),{name:r,public:i,collaborative:o,description:n})).data}catch(e){throw new Error("fail to fetch create playlist")}}}}]);
//# sourceMappingURL=239.js.map?ver=c7ef7d3f15e0c6fc8b85