"use strict";(self.webpackChunkspotify_demo=self.webpackChunkspotify_demo||[]).push([[827],{2229:(t,e,a)=>{a.d(e,{A:()=>l});var i=a(1083),r=a(5800);const n=i.A.create({baseURL:r.$7,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});n.interceptors.request.use((t=>(t.headers.Authorization="Bearer ".concat(localStorage.getItem("access_token")),t)));const l=n},5827:(t,e,a)=>{a.r(e),a.d(e,{default:()=>N});var i=a(6540),r=a(5647),n=a(7286),l=a(8511);var s=a(6739),o=a(9494),c=a(4026),d=a(6700),h=a(8828),p=a(4963),g=a(1361),u=a(3923),y=a(6475);const x=t=>{let{playlist_id:e,limit:a}=t;return(0,y.q)({queryKey:["playlist-items",e],queryFn:t=>{let{pageParam:i=0}=t;return(0,l.Dg)({playlist_id:e,limit:a,offset:i})},initialPageParam:0,getNextPageParam:t=>{if(t.next){const e=new URL(t.next).searchParams.get("offset");return e?parseInt(e):void 0}}})};var m=a(5692),f=a(4848);const v=(0,s.Ay)(p.A)((()=>({borderBottom:"none"}))),A=(0,s.Ay)(h.A)((t=>{let{theme:e}=t;return{"&:hover":{backgroundColor:e.palette.action.hover}}})),j=t=>{var e;let{item:a,index:r,playlist_id:n}=t;const{data:l,fetchNextPage:s,hasNextPage:o,isFetchingNextPage:c}=x({playlist_id:n,limit:10});console.log("ddd",l);const{ref:d,inView:h}=(0,m.Wx)();(0,i.useEffect)((()=>{h&&o&&!c&&s()}),[h,o,c]);let p=new Date,g=p.getFullYear(),u=String(p.getMonth()+1).padStart(2,"0"),y=String(p.getDate()).padStart(2,"0"),j=String(p.getMinutes()),w=String(p.getSeconds()),b="".concat(g,"-").concat(u,"-").concat(y),k="".concat(j,":").concat(w);return(0,f.jsxs)(A,{children:[(0,f.jsx)(v,{children:r}),(0,f.jsx)(v,{children:a.track.name||"no name"}),(0,f.jsx)(v,{children:(_=a.track,"description"in _?"N/A":null===(e=a.track.album)||void 0===e?void 0:e.name)}),(0,f.jsx)(v,{children:b||"Unknown"}),(0,f.jsxs)(v,{children:[k||"Unknown",(0,f.jsx)("span",{ref:d,style:{display:"inline-block",width:1,height:1}})]})]});var _};var w=a(5800),b=a(2687);const k=()=>{const[t,e]=(0,i.useState)("");return(0,f.jsxs)("div",{children:[(0,f.jsx)(o.A,{variant:"h1",my:"10px",children:"Let's find something for your playlist"}),(0,f.jsx)(b.A,{value:t,onChange:t=>{e(t.target.value)}})]})},_=(0,s.Ay)("div")((t=>{let{theme:e}=t;return{width:"100%",padding:"16px 16px 0px 16px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"}})),P=(0,s.Ay)("div")((t=>{let{theme:e}=t;return{display:"flex",flexDirection:"column",marginLeft:"20px"}})),S=(0,s.Ay)("div")((()=>({overflowY:"auto",maxHeight:"calc(100vh - 300px - 100px)",width:"100%","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"}))),N=()=>{var t,e,a,i;const{id:s}=(0,r.g)(),{data:y,isLoading:m}=(v={playlist_id:s||""},(0,n.I)({queryKey:["playlist-detali",v.playlist_id],queryFn:()=>(0,l.bt)(v),enabled:!!v.playlist_id}));var v;console.log(y);const{data:A,isLoading:b,error:N,fetchNextPage:D,hasNextPage:W,isFetchingNextPage:q}=x({playlist_id:s||"",limit:10});if(console.log("ddd",A),!s)return(0,f.jsx)(r.C5,{to:"/"});if(m||!y)return(0,f.jsx)(u.A,{});const C=(null===(t=y.images)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.url)||"";return(0,f.jsxs)(_,{children:[(0,f.jsx)("img",{src:C||"/images/noImage.png",alt:y.name,loading:"lazy",style:{borderRadius:8,width:100,height:100}}),(0,f.jsxs)(P,{children:[(0,f.jsx)(o.A,{variant:"h3",fontWeight:700,color:"white",children:y.name}),(0,f.jsx)(o.A,{variant:"h2",fontWeight:700,color:"theme.primary",children:y.owner.display_name}),(0,f.jsxs)(o.A,{variant:"h2",fontWeight:700,color:"theme.primary",children:[null!==(e=null==y||null===(a=y.tracks)||void 0===a?void 0:a.total)&&void 0!==e?e:0," songs"]})]}),0===(null==y||null===(i=y.tracks)||void 0===i?void 0:i.total)?(0,f.jsx)(k,{}):(0,f.jsx)(S,{children:(0,f.jsxs)(c.A,{children:[(0,f.jsx)(d.A,{children:(0,f.jsxs)(h.A,{children:[(0,f.jsx)(p.A,{children:"#"}),(0,f.jsx)(p.A,{children:"Title"}),(0,f.jsx)(p.A,{children:"Album"}),(0,f.jsx)(p.A,{children:"Date Added"}),(0,f.jsx)(p.A,{children:"Duration"})]})}),(0,f.jsx)(g.A,{children:null==A?void 0:A.pages.map(((t,e)=>t.items.map(((t,a)=>(0,f.jsx)(j,{item:t,index:e*w.Wt+a+1,playlist_id:s},e*w.Wt+a+1)))))})]})})]})}},8511:(t,e,a)=>{a.d(e,{Dg:()=>l,Nt:()=>s,U4:()=>r,bt:()=>n});var i=a(2229);const r=async t=>{let{limit:e,offset:a}=t;try{return(await i.A.get("/me/playlists",{params:{limit:e,offset:a}})).data}catch(t){throw new Error("fila to fetch current user playlists")}},n=async t=>{try{return(await i.A.get("/playlists/".concat(t.playlist_id),{params:t})).data}catch(t){throw new Error("fail to fetch playlist detail")}},l=async t=>{try{return(await i.A.get("/playlists/".concat(t.playlist_id,"/tracks"),{params:t})).data}catch(t){throw new Error("fail to fetch playlist items")}},s=async(t,e)=>{try{const{name:a,playlist_public:r,collaborative:n,description:l}=e;return(await i.A.post("/users/".concat(t,"/playlists"),{name:a,public:r,collaborative:n,description:l})).data}catch(t){throw new Error("fail to fetch create playlist")}}}}]);
//# sourceMappingURL=827.js.map?ver=e6bc7bd365d3e55a36a8